JavaPathfinder core system v8.0 (rev ed601659c05efa232caf2862d9d9e6730a38a734) - (C) 2005-2014 United States Government. All rights reserved.


====================================================== system under test
ChatServer.main("2")+ChatClient.main()+ChatClient.main()

====================================================== search started: 2021-05-17 21:09
Client 0 connected.
Server shutting down.
Thread running: Thread[Thread-1,5,main]
Registered worker 0.
0: Received [0]0: Hello, world!

Client 0 connected.
Worker thread 0: java.net.SocketException: Connection reset
Thread running: Thread[Thread-2,5,main]
Registered worker 1.
0: Received [1]0: Hello, world!

Worker thread 1: java.net.SocketException: Connection reset
0: Received [1]0: Hello, world!

Thread running: Thread[Thread-2,5,main]
Registered worker 1.
0: Received [1]0: Hello, world!

Worker thread 1: java.net.SocketException: Connection reset
Worker thread 1: java.net.SocketException: Connection reset
Worker thread 1: java.net.SocketException: Connection reset
0: Received [1]0: Hello, world!

Thread running: Thread[Thread-2,5,main]
Registered worker 1.
Registered worker 1.
Registered worker 1.
Registered worker 1.
Registered worker 1.
Registered worker 1.
Registered worker 1.
0: Received [1]0: Hello, world!

Worker thread 1: java.net.SocketException: Connection reset
Worker thread 1: java.net.SocketException: Connection reset
Worker thread 1: java.net.SocketException: Connection reset
0: Received [1]0: Hello, world!

0: Received [1]0: Hello, world!

0: Received [1]0: Hello, world!

Registered worker 1.
0: Received Client 0 quit.


====================================================== error 1
gov.nasa.jpf.vm.NoUncaughtExceptionsProperty
java.lang.AssertionError
	at ChatClient.exec(ChatClient.java:45)
	at ChatClient.main(ChatClient.java:17)


====================================================== trace #1
------------------------------------------------------ transition #0 thread: 0
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"ROOT" ,1/3,isCascaded:false}
      [3168 insn w/o sources]
  ChatServer.java:108            : if (args.length == 0) {
  ChatServer.java:111            : new ChatServer(Integer.parseInt(args[0]));
      [2 insn w/o sources]
  ChatServer.java:111            : new ChatServer(Integer.parseInt(args[0]));
  ChatServer.java:63             : public ChatServer(int maxServ) {
      [1 insn w/o sources]
  ChatServer.java:61             : int n = 0;
  ChatServer.java:64             : int port = 4444;
  ChatServer.java:65             : workers = new Worker[maxServ];
  ChatServer.java:67             : ServerSocket servsock = null;
  ChatServer.java:70             : int corePoolSize = maxServ;
  ChatServer.java:71             : int maxPoolSize = maxServ;
  ChatServer.java:72             : long keepAliveTime = 15;
  ChatServer.java:73             : BlockingQueue<Runnable> workQueue = new SynchronousQueue();
      [32 insn w/o sources]
  ChatServer.java:73             : BlockingQueue<Runnable> workQueue = new SynchronousQueue();
      [49 insn w/o sources]
  ChatServer.java:73             : BlockingQueue<Runnable> workQueue = new SynchronousQueue();
  ChatServer.java:74             : RejectedExecutionHandler handler = new RejectedExecutionHandlerClass();
      [10 insn w/o sources]
  ChatServer.java:74             : RejectedExecutionHandler handler = new RejectedExecutionHandlerClass();
      [4 insn w/o sources]
  ChatServer.java:74             : RejectedExecutionHandler handler = new RejectedExecutionHandlerClass();
  ChatServer.java:75             : ThreadPoolExecutor executor = new ThreadPoolExecutor(
      [258 insn w/o sources]
  ChatServer.java:75             : ThreadPoolExecutor executor = new ThreadPoolExecutor(
  env/java/util/concurrent/ThreadPoolExecutor.java:29 : RejectedExecutionHandler handler) {
      [1 insn w/o sources]
  env/java/util/concurrent/ThreadPoolExecutor.java:31 : this.corePoolSize = corePoolSize;
  env/java/util/concurrent/ThreadPoolExecutor.java:32 : this.maximumPoolSize = maximumPoolSize;
  env/java/util/concurrent/ThreadPoolExecutor.java:33 : this.keepAliveTime = keepAliveTime;
  env/java/util/concurrent/ThreadPoolExecutor.java:34 : this.unit = unit;
  env/java/util/concurrent/ThreadPoolExecutor.java:35 : this.workQueue = (SynchronousQueue) workQueue;
  env/java/util/concurrent/ThreadPoolExecutor.java:36 : this.handler = handler;
  env/java/util/concurrent/ThreadPoolExecutor.java:37 : this.launchedThreads = 0;
  env/java/util/concurrent/ThreadPoolExecutor.java:39 : }
  ChatServer.java:75             : ThreadPoolExecutor executor = new ThreadPoolExecutor(
  ChatServer.java:85             : servsock = new ServerSocket(port);
      [81 insn w/o sources]
  ChatServer.java:85             : servsock = new ServerSocket(port);
  ChatServer.java:86             : while (maxServ-- != 0) {
  ChatServer.java:87             : sock = servsock.accept();
      [141 insn w/o sources]
------------------------------------------------------ transition #1 thread: 1
nas.java.net.choice.NasThreadChoice {id:"BLOCKING_ACCEPT" ,1/2,isCascaded:false}
      [3168 insn w/o sources]
  ChatClient.java:12             : public class ChatClient {
      [2 insn w/o sources]
  ChatClient.java:12             : public class ChatClient {
  ChatClient.java:14             : static int currID = 0;
  ChatClient.java:1              : import java.io.BufferedReader;
      [1 insn w/o sources]
  ChatClient.java:17             : new ChatClient().exec();
  ChatClient.java:20             : public ChatClient() {
      [1 insn w/o sources]
  ChatClient.java:21             : synchronized(getClass()) {
      [2 insn w/o sources]
  ChatClient.java:21             : synchronized(getClass()) {
  ChatClient.java:22             : id = currID++;
  ChatClient.java:23             : }
  ChatClient.java:24             : }
  ChatClient.java:17             : new ChatClient().exec();
  ChatClient.java:28             : Socket socket = new Socket();
      [10 insn w/o sources]
  ChatClient.java:28             : Socket socket = new Socket();
      [116 insn w/o sources]
  ChatClient.java:28             : Socket socket = new Socket();
  ChatClient.java:29             : InetSocketAddress addr = new InetSocketAddress("localhost", 4444);
      [20 insn w/o sources]
  ChatClient.java:29             : InetSocketAddress addr = new InetSocketAddress("localhost", 4444);
  ChatClient.java:30             : socket.connect(addr);
      [23 insn w/o sources]
------------------------------------------------------ transition #2 thread: 0
nas.java.net.choice.NasThreadChoice {id:"CONNECT" ,1/3,isCascaded:false}
      [3 insn w/o sources]
  ChatServer.java:87             : sock = servsock.accept();
  ChatServer.java:90             : worker = new Worker(sock, this);
      [1 insn w/o sources]
  ChatServer.java:13             : class Worker implements Runnable {
      [2 insn w/o sources]
  ChatServer.java:13             : class Worker implements Runnable {
  ChatServer.java:1              : import java.io.BufferedReader;
  ChatServer.java:90             : worker = new Worker(sock, this);
  ChatServer.java:20             : public Worker(Socket s, ChatServer cs) throws IOException {
      [1 insn w/o sources]
  ChatServer.java:21             : chatServer = cs;
  ChatServer.java:22             : sock = s;
  ChatServer.java:23             : idx = chatServer.n;
  ChatServer.java:25             : in = new BufferedReader(new InputStreamReader(s.getInputStream()));
      [7 insn w/o sources]
  ChatServer.java:25             : in = new BufferedReader(new InputStreamReader(s.getInputStream()));
      [8 insn w/o sources]
  ChatServer.java:25             : in = new BufferedReader(new InputStreamReader(s.getInputStream()));
      [29 insn w/o sources]
  ChatServer.java:25             : in = new BufferedReader(new InputStreamReader(s.getInputStream()));
      [23 insn w/o sources]
  ChatServer.java:25             : in = new BufferedReader(new InputStreamReader(s.getInputStream()));
      [48 insn w/o sources]
  ChatServer.java:25             : in = new BufferedReader(new InputStreamReader(s.getInputStream()));
  ChatServer.java:28             : out = new PrintWriter(sock.getOutputStream(), true);
      [29 insn w/o sources]
  ChatServer.java:28             : out = new PrintWriter(sock.getOutputStream(), true);
      [270 insn w/o sources]
  ChatServer.java:28             : out = new PrintWriter(sock.getOutputStream(), true);
  ChatServer.java:30             : if (in == null || out == null) {
  ChatServer.java:33             : }
  ChatServer.java:90             : worker = new Worker(sock, this);
  ChatServer.java:91             : executor.execute(worker);
  env/java/util/concurrent/ThreadPoolExecutor.java:45 : if (this.launchedThreads < this.maximumPoolSize) {
  env/java/util/concurrent/ThreadPoolExecutor.java:46 : new Thread(r).start();
      [145 insn w/o sources]
  env/java/util/concurrent/ThreadPoolExecutor.java:46 : new Thread(r).start();
      [1 insn w/o sources]
------------------------------------------------------ transition #3 thread: 0
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"START" ,1/2,isCascaded:false}
      [2 insn w/o sources]
  env/java/util/concurrent/ThreadPoolExecutor.java:47 : this.launchedThreads++;
  env/java/util/concurrent/ThreadPoolExecutor.java:51 : }
  ChatServer.java:95             : }
  ChatServer.java:97             : n++;
  ChatServer.java:98             : }
  ChatServer.java:86             : while (maxServ-- != 0) {
  ChatServer.java:87             : sock = servsock.accept();
      [67 insn w/o sources]
------------------------------------------------------ transition #4 thread: 0
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [64 insn w/o sources]
------------------------------------------------------ transition #5 thread: 1
nas.java.net.choice.NasThreadChoice {id:"BLOCKING_ACCEPT" ,1/3,isCascaded:false}
      [4 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:32             : InputStreamReader istr =
      [8 insn w/o sources]
  ChatClient.java:32             : InputStreamReader istr =
  ChatClient.java:33             : new InputStreamReader(socket.getInputStream());
      [29 insn w/o sources]
  ChatClient.java:33             : new InputStreamReader(socket.getInputStream());
      [23 insn w/o sources]
  ChatClient.java:33             : new InputStreamReader(socket.getInputStream());
  ChatClient.java:34             : BufferedReader in = new BufferedReader(istr);
      [7 insn w/o sources]
  ChatClient.java:34             : BufferedReader in = new BufferedReader(istr);
      [48 insn w/o sources]
  ChatClient.java:34             : BufferedReader in = new BufferedReader(istr);
  ChatClient.java:35             : OutputStreamWriter out =
      [8 insn w/o sources]
  ChatClient.java:35             : OutputStreamWriter out =
  ChatClient.java:36             : new OutputStreamWriter(socket.getOutputStream());
      [29 insn w/o sources]
  ChatClient.java:36             : new OutputStreamWriter(socket.getOutputStream());
      [17 insn w/o sources]
  ChatClient.java:36             : new OutputStreamWriter(socket.getOutputStream());
  ChatClient.java:37             : out.write(id + ": Hello, world!\n");
      [2 insn w/o sources]
  ChatClient.java:37             : out.write(id + ": Hello, world!\n");
      [2 insn w/o sources]
  ChatClient.java:37             : out.write(id + ": Hello, world!\n");
      [2 insn w/o sources]
  ChatClient.java:37             : out.write(id + ": Hello, world!\n");
      [2 insn w/o sources]
  ChatClient.java:37             : out.write(id + ": Hello, world!\n");
      [55 insn w/o sources]
  ChatClient.java:38             : out.flush();
      [1 insn w/o sources]
  ChatClient.java:39             : for (int i = 0; i < 1; i++) {
  ChatClient.java:40             : String line = in.readLine();
      [77 insn w/o sources]
------------------------------------------------------ transition #6 thread: 2
nas.java.net.choice.NasThreadChoice {id:"BLOCKING_READ" ,1/2,isCascaded:false}
      [3168 insn w/o sources]
  ChatClient.java:12             : public class ChatClient {
      [2 insn w/o sources]
  ChatClient.java:12             : public class ChatClient {
  ChatClient.java:14             : static int currID = 0;
  ChatClient.java:1              : import java.io.BufferedReader;
      [1 insn w/o sources]
  ChatClient.java:17             : new ChatClient().exec();
  ChatClient.java:20             : public ChatClient() {
      [1 insn w/o sources]
  ChatClient.java:21             : synchronized(getClass()) {
      [2 insn w/o sources]
  ChatClient.java:21             : synchronized(getClass()) {
  ChatClient.java:22             : id = currID++;
  ChatClient.java:23             : }
  ChatClient.java:24             : }
  ChatClient.java:17             : new ChatClient().exec();
  ChatClient.java:28             : Socket socket = new Socket();
      [10 insn w/o sources]
  ChatClient.java:28             : Socket socket = new Socket();
      [116 insn w/o sources]
  ChatClient.java:28             : Socket socket = new Socket();
  ChatClient.java:29             : InetSocketAddress addr = new InetSocketAddress("localhost", 4444);
      [20 insn w/o sources]
  ChatClient.java:29             : InetSocketAddress addr = new InetSocketAddress("localhost", 4444);
  ChatClient.java:30             : socket.connect(addr);
      [23 insn w/o sources]
------------------------------------------------------ transition #7 thread: 0
nas.java.net.choice.NasThreadChoice {id:"CONNECT" ,1/3,isCascaded:false}
      [3 insn w/o sources]
  ChatServer.java:87             : sock = servsock.accept();
  ChatServer.java:90             : worker = new Worker(sock, this);
  ChatServer.java:20             : public Worker(Socket s, ChatServer cs) throws IOException {
      [1 insn w/o sources]
  ChatServer.java:21             : chatServer = cs;
  ChatServer.java:22             : sock = s;
  ChatServer.java:23             : idx = chatServer.n;
  ChatServer.java:25             : in = new BufferedReader(new InputStreamReader(s.getInputStream()));
      [29 insn w/o sources]
  ChatServer.java:25             : in = new BufferedReader(new InputStreamReader(s.getInputStream()));
      [23 insn w/o sources]
  ChatServer.java:25             : in = new BufferedReader(new InputStreamReader(s.getInputStream()));
      [48 insn w/o sources]
  ChatServer.java:25             : in = new BufferedReader(new InputStreamReader(s.getInputStream()));
  ChatServer.java:28             : out = new PrintWriter(sock.getOutputStream(), true);
      [29 insn w/o sources]
  ChatServer.java:28             : out = new PrintWriter(sock.getOutputStream(), true);
      [82 insn w/o sources]
------------------------------------------------------ transition #8 thread: 0
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [112 insn w/o sources]
------------------------------------------------------ transition #9 thread: 0
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [63 insn w/o sources]
  ChatServer.java:28             : out = new PrintWriter(sock.getOutputStream(), true);
  ChatServer.java:30             : if (in == null || out == null) {
  ChatServer.java:33             : }
  ChatServer.java:90             : worker = new Worker(sock, this);
  ChatServer.java:91             : executor.execute(worker);
  env/java/util/concurrent/ThreadPoolExecutor.java:45 : if (this.launchedThreads < this.maximumPoolSize) {
  env/java/util/concurrent/ThreadPoolExecutor.java:46 : new Thread(r).start();
      [27 insn w/o sources]
------------------------------------------------------ transition #10 thread: 0
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [119 insn w/o sources]
  env/java/util/concurrent/ThreadPoolExecutor.java:46 : new Thread(r).start();
      [1 insn w/o sources]
------------------------------------------------------ transition #11 thread: 0
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"START" ,1/3,isCascaded:false}
      [2 insn w/o sources]
  env/java/util/concurrent/ThreadPoolExecutor.java:47 : this.launchedThreads++;
  env/java/util/concurrent/ThreadPoolExecutor.java:51 : }
  ChatServer.java:95             : }
  ChatServer.java:97             : n++;
  ChatServer.java:98             : }
  ChatServer.java:86             : while (maxServ-- != 0) {
  ChatServer.java:99             : servsock.close();
------------------------------------------------------ transition #12 thread: 0
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/3,isCascaded:false}
  ChatServer.java:99             : servsock.close();
      [2 insn w/o sources]
  ChatServer.java:102            : }
  ChatServer.java:103            : executor.shutdown();
  env/java/util/concurrent/ThreadPoolExecutor.java:40 : public void shutdown() { } // stub, not used
  ChatServer.java:104            : System.out.println("Server shutting down.");
      [2 insn w/o sources]
  ChatServer.java:105            : }
  ChatServer.java:111            : new ChatServer(Integer.parseInt(args[0]));
  ChatServer.java:113            : }
  ChatServer.java:3              : import java.io.InputStreamReader;
------------------------------------------------------ transition #13 thread: 3
gov.nasa.jpf.vm.choice.BreakGenerator {id:"finalize" ,1/1,isCascaded:false}
      [27 insn w/o sources]
------------------------------------------------------ transition #14 thread: 3
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/3,isCascaded:false}
      [22 insn w/o sources]
------------------------------------------------------ transition #15 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"POST_FINALIZE" ,1/2,isCascaded:false}
      [1 insn w/o sources]
  ChatServer.java:1              : import java.io.BufferedReader;
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [2 insn w/o sources]
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [2 insn w/o sources]
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [2 insn w/o sources]
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [59 insn w/o sources]
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [2 insn w/o sources]
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [2 insn w/o sources]
  ChatServer.java:38             : assert(out != null);
  ChatServer.java:39             : assert(chatServer.workers[idx] == null);
  ChatServer.java:40             : chatServer.workers[idx] = this;
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:42             : String s = null;
  ChatServer.java:43             : while ((s = in.readLine()) != null) {
      [10 insn w/o sources]
------------------------------------------------------ transition #16 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [47 insn w/o sources]
------------------------------------------------------ transition #17 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [435 insn w/o sources]
  ChatServer.java:43             : while ((s = in.readLine()) != null) {
  ChatServer.java:44             : chatServer.sendAll("[" + idx + "]" + s);
      [2 insn w/o sources]
  ChatServer.java:44             : chatServer.sendAll("[" + idx + "]" + s);
      [2 insn w/o sources]
  ChatServer.java:44             : chatServer.sendAll("[" + idx + "]" + s);
      [2 insn w/o sources]
  ChatServer.java:44             : chatServer.sendAll("[" + idx + "]" + s);
      [2 insn w/o sources]
  ChatServer.java:44             : chatServer.sendAll("[" + idx + "]" + s);
      [2 insn w/o sources]
  ChatServer.java:44             : chatServer.sendAll("[" + idx + "]" + s);
      [2 insn w/o sources]
  ChatServer.java:44             : chatServer.sendAll("[" + idx + "]" + s);
------------------------------------------------------ transition #18 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
  ChatServer.java:44             : chatServer.sendAll("[" + idx + "]" + s);
  ChatServer.java:117            : for (i = 0; i < n; i++) {
  ChatServer.java:118            : if (workers[i] != null) {
  ChatServer.java:119            : workers[i].send(s);
  ChatServer.java:55             : out.println(s);
      [5 insn w/o sources]
------------------------------------------------------ transition #19 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [41 insn w/o sources]
------------------------------------------------------ transition #20 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [109 insn w/o sources]
------------------------------------------------------ transition #21 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [79 insn w/o sources]
------------------------------------------------------ transition #22 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [31 insn w/o sources]
------------------------------------------------------ transition #23 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [26 insn w/o sources]
------------------------------------------------------ transition #24 thread: 1
nas.java.net.choice.NasThreadChoice {id:"WRITE" ,1/4,isCascaded:false}
      [465 insn w/o sources]
  ChatClient.java:40             : String line = in.readLine();
  ChatClient.java:41             : boolean fromClient = Pattern.compile("\\[[0-9]+\\]").matcher(line).find();
      [16 insn w/o sources]
  ChatClient.java:41             : boolean fromClient = Pattern.compile("\\[[0-9]+\\]").matcher(line).find();
      [30 insn w/o sources]
  ChatClient.java:41             : boolean fromClient = Pattern.compile("\\[[0-9]+\\]").matcher(line).find();
      [2 insn w/o sources]
  ChatClient.java:41             : boolean fromClient = Pattern.compile("\\[[0-9]+\\]").matcher(line).find();
  ChatClient.java:42             : boolean clientQuit = Pattern.compile("Client [0-9]+ quit.$").matcher(line).find();
      [16 insn w/o sources]
  ChatClient.java:42             : boolean clientQuit = Pattern.compile("Client [0-9]+ quit.$").matcher(line).find();
      [30 insn w/o sources]
  ChatClient.java:42             : boolean clientQuit = Pattern.compile("Client [0-9]+ quit.$").matcher(line).find();
      [2 insn w/o sources]
  ChatClient.java:42             : boolean clientQuit = Pattern.compile("Client [0-9]+ quit.$").matcher(line).find();
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:45             : assert (fromClient || line.equals("Server busy"));
  ChatClient.java:39             : for (int i = 0; i < 1; i++) {
  ChatClient.java:47             : out.close();
      [13 insn w/o sources]
------------------------------------------------------ transition #25 thread: 1
nas.java.net.choice.NasThreadChoice {id:"SOCKET_CLOSE" ,1/4,isCascaded:false}
      [4 insn w/o sources]
  ChatClient.java:50             : }
  ChatClient.java:51             : }
  ChatClient.java:3              : import java.io.InputStream;
------------------------------------------------------ transition #26 thread: 4
gov.nasa.jpf.vm.choice.BreakGenerator {id:"finalize" ,1/1,isCascaded:false}
      [56 insn w/o sources]
------------------------------------------------------ transition #27 thread: 2
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"TERMINATE" ,1/3,isCascaded:false,attrs:[gov.nasa.jpf.vm.GlobalSchedulingPoint@2d127a61]}
      [4 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:31             : System.out.println("Client " + id + " connected.");
      [2 insn w/o sources]
  ChatClient.java:32             : InputStreamReader istr =
      [8 insn w/o sources]
  ChatClient.java:32             : InputStreamReader istr =
  ChatClient.java:33             : new InputStreamReader(socket.getInputStream());
      [29 insn w/o sources]
  ChatClient.java:33             : new InputStreamReader(socket.getInputStream());
      [23 insn w/o sources]
  ChatClient.java:33             : new InputStreamReader(socket.getInputStream());
  ChatClient.java:34             : BufferedReader in = new BufferedReader(istr);
      [7 insn w/o sources]
  ChatClient.java:34             : BufferedReader in = new BufferedReader(istr);
      [48 insn w/o sources]
  ChatClient.java:34             : BufferedReader in = new BufferedReader(istr);
  ChatClient.java:35             : OutputStreamWriter out =
      [8 insn w/o sources]
  ChatClient.java:35             : OutputStreamWriter out =
  ChatClient.java:36             : new OutputStreamWriter(socket.getOutputStream());
      [29 insn w/o sources]
  ChatClient.java:36             : new OutputStreamWriter(socket.getOutputStream());
      [17 insn w/o sources]
  ChatClient.java:36             : new OutputStreamWriter(socket.getOutputStream());
  ChatClient.java:37             : out.write(id + ": Hello, world!\n");
      [2 insn w/o sources]
  ChatClient.java:37             : out.write(id + ": Hello, world!\n");
      [2 insn w/o sources]
  ChatClient.java:37             : out.write(id + ": Hello, world!\n");
      [2 insn w/o sources]
  ChatClient.java:37             : out.write(id + ": Hello, world!\n");
      [2 insn w/o sources]
  ChatClient.java:37             : out.write(id + ": Hello, world!\n");
      [55 insn w/o sources]
  ChatClient.java:38             : out.flush();
      [1 insn w/o sources]
  ChatClient.java:39             : for (int i = 0; i < 1; i++) {
  ChatClient.java:40             : String line = in.readLine();
      [77 insn w/o sources]
------------------------------------------------------ transition #28 thread: 6
nas.java.net.choice.NasThreadChoice {id:"BLOCKING_READ" ,1/2,isCascaded:false}
      [39 insn w/o sources]
  ChatServer.java:56             : }
  ChatServer.java:117            : for (i = 0; i < n; i++) {
  ChatServer.java:118            : if (workers[i] != null) {
  ChatServer.java:117            : for (i = 0; i < n; i++) {
  ChatServer.java:122            : }
  ChatServer.java:44             : chatServer.sendAll("[" + idx + "]" + s);
  ChatServer.java:43             : while ((s = in.readLine()) != null) {
      [10 insn w/o sources]
------------------------------------------------------ transition #29 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [47 insn w/o sources]
------------------------------------------------------ transition #30 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [32 insn w/o sources]
  ChatServer.java:47             : } catch(IOException ioe) {
  ChatServer.java:48             : System.out.println("Worker thread " + idx + ": " + ioe);
      [2 insn w/o sources]
  ChatServer.java:48             : System.out.println("Worker thread " + idx + ": " + ioe);
      [2 insn w/o sources]
  ChatServer.java:48             : System.out.println("Worker thread " + idx + ": " + ioe);
      [2 insn w/o sources]
  ChatServer.java:48             : System.out.println("Worker thread " + idx + ": " + ioe);
      [2 insn w/o sources]
  ChatServer.java:48             : System.out.println("Worker thread " + idx + ": " + ioe);
      [14 insn w/o sources]
  ChatServer.java:48             : System.out.println("Worker thread " + idx + ": " + ioe);
      [2 insn w/o sources]
  ChatServer.java:48             : System.out.println("Worker thread " + idx + ": " + ioe);
      [2 insn w/o sources]
  ChatServer.java:50             : chatServer.remove(idx);
------------------------------------------------------ transition #31 thread: 7
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,2/2,isCascaded:false}
      [1 insn w/o sources]
  ChatServer.java:1              : import java.io.BufferedReader;
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [2 insn w/o sources]
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [2 insn w/o sources]
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [2 insn w/o sources]
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [59 insn w/o sources]
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [2 insn w/o sources]
  ChatServer.java:36             : System.out.println("Thread running: " + Thread.currentThread());
      [2 insn w/o sources]
  ChatServer.java:38             : assert(out != null);
  ChatServer.java:39             : assert(chatServer.workers[idx] == null);
------------------------------------------------------ transition #32 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_OBJECT" ,1/2,isCascaded:false}
  ChatServer.java:50             : chatServer.remove(idx);
  ChatServer.java:125            : workers[i] = null;
------------------------------------------------------ transition #33 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_OBJECT" ,1/2,isCascaded:false}
  ChatServer.java:125            : workers[i] = null;
  ChatServer.java:126            : sendAll("Client " + i + " quit.");
      [2 insn w/o sources]
  ChatServer.java:126            : sendAll("Client " + i + " quit.");
      [2 insn w/o sources]
  ChatServer.java:126            : sendAll("Client " + i + " quit.");
      [2 insn w/o sources]
  ChatServer.java:126            : sendAll("Client " + i + " quit.");
      [2 insn w/o sources]
  ChatServer.java:126            : sendAll("Client " + i + " quit.");
      [2 insn w/o sources]
  ChatServer.java:126            : sendAll("Client " + i + " quit.");
  ChatServer.java:117            : for (i = 0; i < n; i++) {
------------------------------------------------------ transition #34 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_OBJECT" ,1/2,isCascaded:false}
  ChatServer.java:117            : for (i = 0; i < n; i++) {
  ChatServer.java:118            : if (workers[i] != null) {
------------------------------------------------------ transition #35 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_OBJECT" ,1/2,isCascaded:false}
  ChatServer.java:118            : if (workers[i] != null) {
  ChatServer.java:117            : for (i = 0; i < n; i++) {
------------------------------------------------------ transition #36 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_OBJECT" ,1/2,isCascaded:false}
  ChatServer.java:117            : for (i = 0; i < n; i++) {
  ChatServer.java:118            : if (workers[i] != null) {
------------------------------------------------------ transition #37 thread: 7
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_OBJECT" ,2/2,isCascaded:false}
  ChatServer.java:39             : assert(chatServer.workers[idx] == null);
------------------------------------------------------ transition #38 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_ARRAY" ,1/2,isCascaded:false}
  ChatServer.java:118            : if (workers[i] != null) {
------------------------------------------------------ transition #39 thread: 7
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_ARRAY" ,2/2,isCascaded:false}
  ChatServer.java:39             : assert(chatServer.workers[idx] == null);
  ChatServer.java:40             : chatServer.workers[idx] = this;
------------------------------------------------------ transition #40 thread: 7
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_OBJECT" ,2/2,isCascaded:false}
  ChatServer.java:40             : chatServer.workers[idx] = this;
------------------------------------------------------ transition #41 thread: 7
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_ARRAY" ,2/2,isCascaded:false}
  ChatServer.java:40             : chatServer.workers[idx] = this;
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:41             : System.out.println("Registered worker " + idx + ".");
      [2 insn w/o sources]
  ChatServer.java:42             : String s = null;
  ChatServer.java:43             : while ((s = in.readLine()) != null) {
      [10 insn w/o sources]
------------------------------------------------------ transition #42 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
  ChatServer.java:118            : if (workers[i] != null) {
  ChatServer.java:119            : workers[i].send(s);
------------------------------------------------------ transition #43 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_OBJECT" ,1/2,isCascaded:false}
  ChatServer.java:119            : workers[i].send(s);
------------------------------------------------------ transition #44 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_ARRAY" ,1/2,isCascaded:false}
  ChatServer.java:119            : workers[i].send(s);
  ChatServer.java:55             : out.println(s);
------------------------------------------------------ transition #45 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"SHARED_OBJECT" ,1/2,isCascaded:false}
  ChatServer.java:55             : out.println(s);
      [5 insn w/o sources]
------------------------------------------------------ transition #46 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [41 insn w/o sources]
------------------------------------------------------ transition #47 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [109 insn w/o sources]
------------------------------------------------------ transition #48 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [79 insn w/o sources]
------------------------------------------------------ transition #49 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [31 insn w/o sources]
------------------------------------------------------ transition #50 thread: 6
gov.nasa.jpf.vm.choice.ThreadChoiceFromSet {id:"LOCK" ,1/2,isCascaded:false}
      [26 insn w/o sources]
------------------------------------------------------ transition #51 thread: 2
nas.java.net.choice.NasThreadChoice {id:"WRITE" ,1/3,isCascaded:false}
      [380 insn w/o sources]
  ChatClient.java:40             : String line = in.readLine();
  ChatClient.java:41             : boolean fromClient = Pattern.compile("\\[[0-9]+\\]").matcher(line).find();
      [16 insn w/o sources]
  ChatClient.java:41             : boolean fromClient = Pattern.compile("\\[[0-9]+\\]").matcher(line).find();
      [30 insn w/o sources]
  ChatClient.java:41             : boolean fromClient = Pattern.compile("\\[[0-9]+\\]").matcher(line).find();
      [2 insn w/o sources]
  ChatClient.java:41             : boolean fromClient = Pattern.compile("\\[[0-9]+\\]").matcher(line).find();
  ChatClient.java:42             : boolean clientQuit = Pattern.compile("Client [0-9]+ quit.$").matcher(line).find();
      [16 insn w/o sources]
  ChatClient.java:42             : boolean clientQuit = Pattern.compile("Client [0-9]+ quit.$").matcher(line).find();
      [30 insn w/o sources]
  ChatClient.java:42             : boolean clientQuit = Pattern.compile("Client [0-9]+ quit.$").matcher(line).find();
      [2 insn w/o sources]
  ChatClient.java:42             : boolean clientQuit = Pattern.compile("Client [0-9]+ quit.$").matcher(line).find();
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:43             : System.out.println(id + ": Received " + line + "\n");
      [2 insn w/o sources]
  ChatClient.java:45             : assert (fromClient || line.equals("Server busy"));
      [2 insn w/o sources]
  ChatClient.java:45             : assert (fromClient || line.equals("Server busy"));
      [24 insn w/o sources]

====================================================== snapshot #1
thread gov.nasa.jpf.FinalizerThread:{id:3,name:finalizer,status:WAITING,priority:5,isDaemon:false,lockCount:0,suspendCount:0}
  waiting on: java.lang.Object@c7
  call stack:
	at gov.nasa.jpf.FinalizerThread.manageState(FinalizerThread.java)
	at gov.nasa.jpf.FinalizerThread.processFinalizers(FinalizerThread.java:62)
	at gov.nasa.jpf.FinalizerThread.run(FinalizerThread.java:68)

thread java.lang.Thread:{id:2,name:main,status:RUNNING,priority:5,isDaemon:false,lockCount:0,suspendCount:0}
  call stack:
	at ChatClient.exec(ChatClient.java:45)
	at ChatClient.main(ChatClient.java:17)

thread gov.nasa.jpf.FinalizerThread:{id:5,name:finalizer,status:WAITING,priority:5,isDaemon:false,lockCount:0,suspendCount:0}
  waiting on: java.lang.Object@251
  call stack:

thread java.lang.Thread:{id:6,name:Thread-1,status:RUNNING,priority:5,isDaemon:false,lockCount:0,suspendCount:0}
  owned locks:ChatServer@2f5,java.io.BufferedWriter@579,java.io.OutputStreamWriter@57a,java.lang.Object@45e
  call stack:
	at java.net.SocketOutputStream.write(SocketOutputStream.java)
	at java.io.OutputStreamWriter.write(OutputStreamWriter.java:87)
	at java.io.BufferedWriter.flushBuffer(BufferedWriter.java:129)
	at java.io.BufferedWriter.flush(BufferedWriter.java:253)
	at java.io.PrintWriter.newLine(PrintWriter.java:482)
	at java.io.PrintWriter.println(PrintWriter.java:629)
	at java.io.PrintWriter.println(PrintWriter.java:740)
	at Worker.send(ChatServer.java:55)
	at ChatServer.sendAll(ChatServer.java:119)
	at ChatServer.remove(ChatServer.java:126)
	at Worker.run(ChatServer.java:50)

thread java.lang.Thread:{id:7,name:Thread-2,status:RUNNING,priority:5,isDaemon:false,lockCount:0,suspendCount:0}
  call stack:
	at java.io.BufferedReader.readLine(BufferedReader.java:316)
	at java.io.BufferedReader.readLine(BufferedReader.java:389)
	at Worker.run(ChatServer.java:43)


====================================================== results
error #1: gov.nasa.jpf.vm.NoUncaughtExceptionsProperty "java.lang.AssertionError  at ChatClient.exec(ChatC..."

====================================================== statistics
elapsed time:       00:00:00
states:             new=320,visited=139,backtracked=407,end=3
search:             maxDepth=83,constraints=0
choice generators:  thread=319 (signal=0,lock=56,sharedRef=52,threadApi=2,reschedule=110), data=0
heap:               new=2334,released=3158,maxLive=1449,gcCycles=453
instructions:       41609
max memory:         155MB
loaded code:        classes=116,methods=5115

====================================================== search finished: 2021-05-17 21:09
